
<div class="container topPadTable">
  <h2 class="text-center">Client

  <button class="btn-default" (click)="goBack()"><i class="fa fa-arrow-left"></i></button>


  </h2>

  <hr>

        <form [formGroup]="myForm" novalidate (ngSubmit)="save(myForm)">
          <div class="form-group">
            <label>_id</label>
            <input type="text" class="form-control" formControlName="_id" [(ngModel)]="fetchedUser._id">
            <small *ngIf="!myForm.controls._id.valid" class="text-danger">
                 Required (minimum 5 characters).
            </small>
          </div>
          <div class="form-group">
            <label>email</label>
            <input type="text" class="form-control" formControlName="email" [(ngModel)]="fetchedUser.email">
            <small *ngIf="!myForm.controls.email.valid" class="text-danger">
                 Required (minimum 5 characters).
            </small>
          </div>
          <div formGroupName="profile">
            <div class="form-group">
              <label>name</label>
              <input type="text" class="form-control" formControlName="name" [(ngModel)]="fetchedUser.profile.name">
            </div>
            <div formGroupName="hair">
              <div class="form-group">
                <label>hairTexture</label>
                <input type="text" class="form-control" formControlName="hairTexture" [(ngModel)]="fetchedUser.profile.hair.hairTexture">
              </div>
            </div>
          </div>


          <!--addresses-->
          <div formArrayName="addresses">
            <div *ngFor="let address of myForm.controls.addresses.controls; let i=index" class="panel panel-default">
              <div class="panel-heading">
                <span>Address {{i + 1}}</span>
                <span class="glyphicon glyphicon-remove pull-right" *ngIf="myForm.controls.addresses.controls.length > 1" (click)="removeAddress(i)"></span>
              </div>
              <div class="panel-body" [formGroupName]="i">
                <address [group]="myForm.controls.addresses.controls[i]"></address>
              </div>
            </div>
          </div>
          <div class="margin-20">
            <a (click)="addAddress()" style="cursor: default">
              Add another address +
            </a>
          </div>
          <!--addresses-->

<br>
<br>

          <!--forms-->
          <div formArrayName="forms">
            <div *ngFor="let form of myForm.controls.forms.controls; let i=index" class="panel panel-default">
              <div class="panel-heading">
                <span>Image {{i + 1}}</span>
                <span class="glyphicon glyphicon-remove pull-right"  (click)="removeForm(i)"></span>
              </div>
              <div class="panel-body" [formGroupName]="i">
                <input type="text" class="form-control" formControlName="_id" [(ngModel)]="fetchedUser.forms[i]._id">
                <img width="150" src="./uploads/forms/{{fetchedUser.forms[i].owner}}/{{fetchedUser.forms[i].imagePath}}" onerror="this.src ='assets/images/no-image-found.jpg'">
              </div>
            </div>
          </div>
          <div class="margin-20">
            <button type="button" md-button (click)="openDialog('img')">+ Media</button>
          </div>
          <!--forms-->


          <div class="margin-20">
            <button type="submit" class="btn btn-primary pull-right" [disabled]="!myForm.valid">Submit</button>
          </div>
          <div class="clearfix"></div>

          <div class="margin-20">
            <div>myForm details:-</div>
            <pre>Is myForm valid?: <br>{{myForm.valid | json}}</pre>
            <pre>form value: <br>{{myForm.value | json}}</pre>
          </div>
        </form>



  <form #f="ngForm" novalidate (ngSubmit)="save(f.value, f.valid)">
    <div class="form-group">
        _id
        <input
          type="text"
          class="form-control"
          [readonly]="true"
          name="_id"
          [(ngModel)]="fetchedUser._id"
          #name="ngModel"
        >
        email
        <input
          type="text"
          class="form-control"
          [readonly]="true"
          name="email"
          [(ngModel)]="fetchedUser.email"
          #name="ngModel"
        >
        updatedAt
        <input
          type="text"
          class="form-control"
          [readonly]="true"
          name="updatedAt"
          value="{{fetchedUser.updatedAt}}"
        >
        <div ngModelGroup="profile">
          name
          <input
            type="text"
            class="form-control"
            [readonly]="true"
            name="name"
            [(ngModel)]="fetchedUser.profile.name"
            #name="ngModel"
          >
          <div ngModelGroup="hair">
            hairTexture
            <input
              type="text"
              class="form-control"

              name="hairTexture"
              [(ngModel)]="fetchedUser.profile.hair.hairTexture"
              #name="ngModel"
            >
          </div>
        </div>


        <div ngModelGroup="forms">
          <!-- <div>
            <img width="150" src="./uploads/forms/{{fetchedUser.img.owner}}/{{fetchedUser.img.imagePath}}" onerror="this.src ='assets/images/no-image-found.jpg'">
          </div> -->


          <div>
            <div *ngFor="let form of fetchedUser.forms; let in = index">

                <div ngModelGroup="{{in}}">
                  <!-- {{form|json}} -->
                  <input type="hidden"
                    class="form-control"
                    name="_id"
                    [(ngModel)]="form._id"
                    #name="ngModel"
                  >
                  <img width="150" src="./uploads/forms/{{form.owner}}/{{form.imagePath}}" onerror="this.src ='assets/images/no-image-found.jpg'">
                </div>
            </div>
          </div>
          <button type="button" md-button (click)="openDialog('img')">+ Media</button>
        </div>

    </div>


    <button type="submit" class="btn btn-default">Submit</button>
  </form>




</div>
